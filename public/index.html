<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Web IDE</title>

    <!-- JSZip / FileSaver -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <!-- Linters -->
    <script src="https://cdn.jsdelivr.net/npm/htmlhint@latest/dist/htmlhint.min.js"></script>
    <script src="https://unpkg.com/htmlhint@latest/dist/htmlhint.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jshint/2.13.4/jshint.min.js"></script>

    <!-- CodeMirror Core -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/tomorrow-night-bright.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>

    <!-- üìå ÏàúÏÑú Ï§ëÏöî: Î™®Îìú Î°úÎî© -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>

    <link rel="stylesheet" href="style2.css">

</head>

<body>

    <!-- Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ -->
    <div id="loginScreen" class="screen">
        <div class="login-container">
            <h1>Î°úÍ∑∏Ïù∏</h1>
            <input type="text" id="username" placeholder="ÏïÑÏù¥Îîî ÏûÖÎ†•">
            <input type="password" id="password" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ ÏûÖÎ†•">
            <button id="loginBtn">Î°úÍ∑∏Ïù∏</button>
            <button id="goToSignupBtn">ÌöåÏõêÍ∞ÄÏûÖ</button>
        </div>
    </div>
    <!-- ÌöåÏõêÍ∞ÄÏûÖ ÌôîÎ©¥ -->
    <div id="signupScreen" style="display:none;">
        <div class="login-container">
            <h1>ÌöåÏõêÍ∞ÄÏûÖ</h1>

            <input type="text" id="signupUsername" placeholder="ÏïÑÏù¥Îîî *">
            <input type="password" id="signupPassword" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ *">
            <input type="password" id="signupPasswordConfirm" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏ *">
            <input type="text" id="signupName" placeholder="Ïù¥Î¶Ñ *">
            <input type="text" id="signupStudentId" placeholder="ÌïôÎ≤à (ÏÑ†ÌÉù)">
            <input type="text" id="signupPhone" placeholder="Ï†ÑÌôîÎ≤àÌò∏ (ÏÑ†ÌÉù)">

            <div class="role-select">
                <label><input type="radio" name="role" value="student" checked> ÌïôÏÉù</label>
                <label><input type="radio" name="role" value="teacher"> ÍµêÏÇ¨</label>
            </div>

            <button id="signupSubmitBtn">ÌöåÏõêÍ∞ÄÏûÖ ÏôÑÎ£å</button>
            <button id="goToLoginBtn">Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ÏúºÎ°ú</button>
        </div>
    </div>

    <!-- ‚ú® Web IDE ÌôîÎ©¥ -->
    <div id="mainScreen" style="display:none;">
        <header class="header">
            <div class="logo">Web IDE with AI feedback</div>
            <nav class="nav">
                <span id="uploadFileName" style="margin-left:10px; font-size:0.9rem; color:white;"></span>

                <button id="newBtn">New</button>
                <input type="file" id="uploadZip" accept=".zip" style="display:none;">
                <button id="uploadBtn">Upload</button>
                <button id="saveBtn">Save</button>
                <button id="submitBtn">Submit</button>
                <button id="runBtn">Run</button>
            </nav>
        </header>

        <main class="main">
            <div class="editor-feedback-container">
                <section class="editor-section">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-lang="html">HTML <span class="change-indicator"
                                id="htmlChanged"></span></button>
                        <button class="tab-btn" data-lang="css">CSS <span class="change-indicator"
                                id="cssChanged"></span></button>
                        <button class="tab-btn" data-lang="js">JS <span class="change-indicator"
                                id="jsChanged"></span></button>
                    </div>
                    <div class="editor-container">
                        <textarea id="htmlEditor"></textarea>
                        <textarea id="cssEditor"></textarea>
                        <textarea id="jsEditor"></textarea>
                    </div>
                </section>

                <div class="output-feedback-wrapper-ide">
                    <div class="output-container">
                        <h2 class="section-title">Output</h2>
                        <div class="fake-browser">
                            <div class="browser-header">
                                <div class="browser-buttons">
                                    <span class="circle red"></span>
                                    <span class="circle yellow"></span>
                                    <span class="circle green"></span>
                                </div>
                                <div class="browser-title" id="browserTitle">Untitled</div>
                            </div>
                            <div class="output-frame-wrapper">
                                <iframe id="outputFrame"></iframe>
                            </div>
                        </div>
                    </div>

                    <section class="feedback-section">
                        <h2 class="section-title">AI Feedback</h2>
                        <pre id="feedback"></pre>
                    </section>
                </div>
            </div>
        </main>

        <footer class="footer">
            Status: Ready
            <button id="goToMyPageBtn">MyPage</button>
            <button id="logoutBtn">Logout</button>
        </footer>
    </div>
    <!-- CodeMirror Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>

    <!-- CodeMirror Modes (ÏàúÏÑú Ï§ëÏöî) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="main.js"></script>
    <!-- ‚ú® Ïª§Ïä§ÌÖÄ Î°úÍ∑∏ÏïÑÏõÉ Î™®Îã¨Ï∞Ω -->
    <div id="logoutModal" class="modal hidden">
        <div class="modal-content">
            <p>Ï†ïÎßê Î°úÍ∑∏ÏïÑÏõÉÌïòÏãúÍ≤†ÏäµÎãàÍπå?</p>
            <div class="modal-buttons">
                <button id="confirmLogoutBtn">ÌôïÏù∏</button>
                <button id="cancelLogoutBtn">Ï∑®ÏÜå</button>
            </div>
        </div>
    </div>

    <!--ÌïôÏÉùÏö© ÎßàÏù¥ÌéòÏù¥ÏßÄÏ∞Ω-->
    <div id="mypageScreen" style="display:none;">
        <header class="header">
            <div class="logo" id="myPageUserName">MyPage</div>
            <nav class="nav">
                <!-- Í∏∞Ï°¥ Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäº ÏòÜÏóê Ï∂îÍ∞Ä -->
                <button id="showTeacherAssignBtn">ÍµêÏÇ¨ Ï∂îÍ∞ÄÌïòÍ∏∞</button>
                <button id="logoutBtnMypage">Logout</button>
            </nav>
        </header>


        <main class="main">
            <div class="mypage-container">
                <div class="submission-list">
                    <h2 class="section-title">Ï†úÏ∂ú Î™©Î°ù</h2>
                    <ul id="submissionList">
                        <!-- Ï†úÏ∂ú Î™©Î°ùÏù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï±ÑÏõåÏßà ÏòàÏ†ï -->
                    </ul>
                </div>
                <!-- ÎßàÏù¥ÌéòÏù¥ÏßÄ Ïïà Ïñ¥ÎîòÍ∞Ä (Ïòà: submission-detail ÏúÑÏ™Ω) -->
                <div id="teacherAssignBox" class="teacher-assign-box" style="display: none;">
                    <h3>üìò Îã¥Îãπ ÍµêÏÇ¨ Îì±Î°ù</h3>
                    <input type="text" id="teacherUsernameInput" placeholder="Îã¥Îãπ ÍµêÏÇ¨ ÏïÑÏù¥Îîî ÏûÖÎ†•">
                    <button id="assignTeacherBtn">Îì±Î°ù</button>
                    <div id="teacherAssignMessage" class="assign-message"></div>
                    <div id="teacherAssignStatus" class="assign-status">
                        üìò Îì±Î°ùÎêú ÍµêÏÇ¨Í∞Ä ÏóÜÏäµÎãàÎã§.
                        <button id="removeTeacherBtn" style="display: none; background:none;">Îã¥Îãπ ÍµêÏÇ¨ ÏÇ≠Ï†ú</button>
                    </div>
                </div>

                <div class="submission-detail">
                    <h2 class="section-title">Ï†úÏ∂ú ÏÉÅÏÑ∏ Î≥¥Í∏∞</h2>
                    <div class="code-tabs">
                        <button class="code-tab-btn active" data-lang="html">HTML</button>
                        <button class="code-tab-btn" data-lang="css">CSS</button>
                        <button class="code-tab-btn" data-lang="js">JS</button>
                    </div>
                    <div id="submittedCode"></div> <!-- CodeMirror -->
                    <div class="output-feedback-wrapper">
                        <div class="output-section">
                            <h3>Output Í≤∞Í≥º</h3>
                            <iframe id="submittedOutput"></iframe>
                        </div>

                        <div class="feedback-section">
                            <h3>Feedback Í≤∞Í≥º</h3>
                            <pre id="submittedFeedback"></pre>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <button id="backToIDEBtn">IDEÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</button>
        </footer>
    </div>
    <div id="dashboardScreen" style="display:none;">

        <header class="header">
            <div class="logo">ÍµêÏÇ¨Ïö© Dashboard</div>
            <nav class="nav">
                <button id="logoutBtnDashboard">Logout</button>
            </nav>
        </header>

        <main class="dashboard-main">
            <aside class="dashboard-student-list">
                <h2>ÌïôÏÉù Î™©Î°ù
                    <button id="toggleStudentListBtn">‚áÜ</button>
                </h2>

                <ul id="studentList"></ul>
            </aside>

            <aside class="dashboard-submission-list">
                <h2>Ï†úÏ∂ú
                    <button id="toggleSubmissionListBtn">‚áÜ</button>
                </h2>
                <ul id="studentSubmissionList"></ul>
            </aside>

            <section class="dashboard-submission-detail">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-lang="html">HTML</button>
                    <button class="tab-btn" data-lang="css">CSS</button>
                    <button class="tab-btn" data-lang="js">JS</button>
                </div>
                <div id="dashboardSubmittedCode"></div>
                <div class="output-feedback-wrapper">
                    <div class="output-section">
                        <h3>Output Í≤∞Í≥º</h3>
                        <iframe id="dashboardSubmittedOutput"></iframe>
                    </div>

                    <div class="feedback-section">
                        <h3>Feedback Í≤∞Í≥º</h3>
                        <pre id="dashboardSubmittedFeedback"></pre>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            ÍµêÏÇ¨Ïö© ÎåÄÏãúÎ≥¥Îìú ÌôîÎ©¥ÏûÖÎãàÎã§
        </footer>
    </div>

</body>

</html>